<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>shaenr</title><link href="https://shaenr.github.io/" rel="alternate"></link><link href="https://shaenr.github.io/atom.xml" rel="self"></link><id>https://shaenr.github.io/</id><updated>2022-03-08T01:54:00-06:00</updated><entry><title>Always Cook Your Headers When Scraping!</title><link href="https://shaenr.github.io/2022/03/always-cook-your-headers-when-scraping/" rel="alternate"></link><published>2022-03-08T01:54:00-06:00</published><updated>2022-03-08T01:54:00-06:00</updated><author><name>shaenr</name></author><id>tag:shaenr.github.io,2022-03-08:/2022/03/always-cook-your-headers-when-scraping/</id><summary type="html">&lt;p&gt;Simple snippet to use in any web request from the command&amp;nbsp;line&lt;/p&gt;</summary><content type="html">&lt;p&gt;I&amp;#8217;m going to try to make a habit of sharing snippets I end up using a&amp;nbsp;lot.&lt;/p&gt;
&lt;p&gt;This is a pretty basic snippet where you should start when you&amp;#8217;re sending web requests from the command line and you need the output to be reflecting of what you would be looking at from a&amp;nbsp;browser.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fake_useragent&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;UserAgent&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_headers&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;User-Agent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;UserAgent&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;Accept-Language&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;en-gb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;Accept-Encoding&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;br,gzip,deflate&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;Accept&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;test/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;Referer&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://www.google.com&amp;quot;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;get_headers&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;raise_for_status&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;  &lt;span class="c1"&gt;# This is simple HTTP error handling.&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;One thing to keep in mind when writing scrapers is that the &lt;code&gt;User-Agent&lt;/code&gt; sent from the requests python3 module could potentially receive a response with different elements that have different attributes than the ones you are looking at in your browser as you are trying to figure out how to write&amp;nbsp;selectors.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Don&amp;#8217;t forget to install &lt;a href="https://docs.python-requests.org/en/latest/"&gt;requests&lt;/a&gt; and &lt;a href="https://pypi.org/project/fake-useragent/"&gt;fake-useragent&lt;/a&gt; using &lt;code&gt;pip install requests fake-useragent&lt;/code&gt;&lt;/p&gt;</content><category term="Programming"></category><category term="web scraping"></category><category term="HTTP protocol"></category><category term="python"></category><category term="snippets"></category></entry><entry><title>Another Place to Write and Not Write</title><link href="https://shaenr.github.io/2022/02/another-page-to-write-and-also-not-write/" rel="alternate"></link><published>2022-02-25T07:54:00-06:00</published><updated>2022-02-25T07:54:00-06:00</updated><author><name>shaenr</name></author><id>tag:shaenr.github.io,2022-02-25:/2022/02/another-page-to-write-and-also-not-write/</id><summary type="html">&lt;p&gt;I have a tendency to encapsulate myself on the Internet behind multiple names, accounts, email addresses, and identities. I wouldn&amp;#8217;t say I &lt;em&gt;always&lt;/em&gt; put an unnecessary amount of effort into keeping them apart. But the multiple aspects thing has always been …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have a tendency to encapsulate myself on the Internet behind multiple names, accounts, email addresses, and identities. I wouldn&amp;#8217;t say I &lt;em&gt;always&lt;/em&gt; put an unnecessary amount of effort into keeping them apart. But the multiple aspects thing has always been a part of&amp;nbsp;me. &lt;/p&gt;
&lt;p&gt;I was known for changing my screen names too often even back in the &lt;span class="caps"&gt;AOL&lt;/span&gt; days before any of us had considered the the actual security implications of the modern web; so it&amp;#8217;s just a part of who I am and not always only paranoia or a tendency towards dissociation. Though, sometimes both of those things are true. I thing especially the last&amp;nbsp;bit.&lt;/p&gt;
&lt;p&gt;This is probably the only page that I have used a real picture of myself on the Internet since probably around 2015 or so. Back then, I had plenty of social media accounts filled with pictures and other confessions of myself just like anyone else. And I still use the Internet a lot, but I find it a far less comfortable place to be honest than I used&amp;nbsp;to.&lt;/p&gt;
&lt;p&gt;Most of that comes in the form of starting blogs that I want to try writing in but ultimately won&amp;#8217;t. And when I do, those pages will be up only long enough to be forgotten, found again, and then replaced by another page with another name and another theme to play&amp;nbsp;with.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Why Do I Delete the Pages that I&amp;nbsp;Write?&lt;/h2&gt;
&lt;p&gt;I didn&amp;#8217;t always do it. Back in those &lt;span class="caps"&gt;AOL&lt;/span&gt; Instant Messenger days, I also used to have a LiveJournal that I kept up with writing regularly for most of my young adulthood. I would go as far as to say that it was at some point mostly a habit. It was just a means of coping with my overactive, obsessive mind. But as a teenager, I believed that I was a good at writing. There were some small amount of people back then who would have agreed in some&amp;nbsp;degree. &lt;/p&gt;
&lt;p&gt;Sure, the Internet was just different back then, and maybe it was a lot easier to just let myself be revealed. After all, only nerds like people on LiveJournal and other sorts of niche things were even using it regularly. But  think more than anything, I realized that I&amp;#8217;m not a good&amp;nbsp;writer. &lt;/p&gt;
&lt;p&gt;Writing is as characteristic of my mental condition. Whether or not some people might have enjoyed it isn&amp;#8217;t the point. I know that when I was doing it seriously all the time that some people did. But I was never in control or able to to manifest exactly what I wanted. I was just compulsively engaging in a mannerism that was a part of me. Like minnows swimming&amp;nbsp;upstream. &lt;/p&gt;
&lt;p&gt;As I got older and the Internet changed &amp;#8212; LiveJournal was taken over by Russians &amp;#8212; and no one was left on the Internet  who wanted to talk about their most private thoughts semi-publicly anymore. And at this point, I don&amp;#8217;t even blame them. This is incredibly difficult for&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;The more I write, the more things that I have written accumulate and reveal progressively more things about who I am deep down &amp;#8212; what issues I struggle with. It becomes apparent that for as passionate as I may have seemed to be, I suddenly become possessed by the spirit of another, who thinks about other&amp;nbsp;things.&lt;/p&gt;
&lt;p&gt;Those different people have had a a diverse amount of different types of blogs (among other things&amp;#8230;) and such &amp;#8212; about different subjects that I have started and and run away from and started over again a million times before, each time very differently written without connection to any others. The only connections sometimes is that the persons writing it actually are a person like it or not, and the way they write is very characteristic of&amp;nbsp;him.&lt;/p&gt;
&lt;p&gt;The reason why is because he is not able to stop that from happening as he writes. He simply does&amp;nbsp;so.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;They&amp;#8217;re Not All Deleted&amp;nbsp;Actually&lt;/h2&gt;
&lt;p&gt;In fact most of them are not actually deleted. While more than a few things have been lost to the ages, forgotten or lamented on ancient hard drives that will never spin another day, most are not actually worth thinking about very much. Many things I&amp;#8217;ve lost I probably wouldn&amp;#8217;t remember if you put them in front of me anyway. but the things I have had for a long time I do remember for that reason. They&amp;#8217;re not mostly deleted &amp;#8212; just taken out of front facing places and left unmaintained. Usually it&amp;#8217;s difficult to think of these writings as having come from or having anything to do with the present &lt;em&gt;me&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;A large part of why they are phased out is because they become less relatable for me to continue working on sometimes. I will remember the writer as if he were a character who I read many serial entries about in a long running fiction. I &lt;em&gt;do&lt;/em&gt; actually know would be  a fantasy if actually could derealize enough to not be the person that I have been&amp;#8230; &amp;#8212; and moreover, the person who &lt;em&gt;I still am&lt;/em&gt; &amp;#8212; in spite of the jarring contrast between these&amp;nbsp;characters. &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;What was the problem I had with this last&amp;nbsp;blog?&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;(Or was that really even the last one?&amp;nbsp;😂)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;But what I mean is, this exact identity, this exact url&amp;#8230; &amp;#8212; okay, perhaps not the exact url, but one that was very similar &amp;#8212; and actually did use this same design and this same photograph avatar, with these taglines about my being a programmer verbatim&amp;#8230; What was my problem with&amp;nbsp;those?&lt;/p&gt;
&lt;p&gt;You could easily trace it back through the wayback machine if you were inclined enough. And you&amp;#8217;d get an idea what I was writing about then wasn&amp;#8217;t that bold and dangerous of a subject to try out as a&amp;nbsp;wordsmith. &lt;/p&gt;
&lt;p&gt;I&amp;#8217;m afraid that is a subject I don&amp;#8217;t have time to start, but overall, writing about programming projects is hardly the most shamefully difficult of honest topics where I have revealed the most about myself and feel the most&amp;nbsp;insecure. &lt;/p&gt;
&lt;p&gt;&amp;#8230;or&amp;#8230;&lt;/p&gt;
&lt;p&gt;Maybe it is actually one of the most difficult things for me. Maybe like being a writer all those years ago, I have realized again that I am also not a good programmer&amp;nbsp;either. &lt;/p&gt;
&lt;p&gt;I am merely a strange obsessive man who dwells on the Internet. And I&amp;#8217;m a good enough &amp;#8212; or so I believe for now &amp;#8212; liar to have gotten away with the&amp;nbsp;delusion.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Now for Some&lt;em&gt;one&lt;/em&gt; Completely&amp;nbsp;Different&lt;/h1&gt;
&lt;p&gt;I am going to try out allowing to have some of the dots to be connected&amp;nbsp;again. &lt;/p&gt;
&lt;p&gt;Yes, you know I am &lt;strong&gt;shaenr&lt;/strong&gt; from &lt;a href="https://github.com/shaenr"&gt;github&lt;/a&gt; and &lt;a href="https://hackers.town/@shaen"&gt;hackers.town&lt;/a&gt;, a hobbyist programmer and discerning user of software with roots in the free and open source angle; my perfectly sterile, statically generated blog of optimal white and black contrast and readability proves as&amp;nbsp;much.&lt;/p&gt;
&lt;p&gt;*&lt;em&gt;But!&lt;/em&gt; &lt;/p&gt;
&lt;iframe width="100%" height="300" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1155278215&amp;color=%23f0d1d0&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true&amp;visual=true"&gt;&lt;/iframe&gt;

&lt;div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"&gt;&lt;a href="https://soundcloud.com/divselector" title="ｄｉｖ セレクタ" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;ｄｉｖ セレクタ&lt;/a&gt; · &lt;a href="https://soundcloud.com/divselector/ou-do-ko-aou-me" title="ყơų ɖơŋ&amp;#x27;ɬ ƙŋơῳ ąცơųɬ ɱɛ" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;ყơų ɖơŋ&amp;#x27;ɬ ƙŋơῳ ąცơųɬ ɱɛ&lt;/a&gt;&lt;/div&gt;

&lt;p&gt;I am also &lt;strong&gt;ｄｉｖ セレクタ&lt;/strong&gt; ; that is, I am &amp;#8216;the lil homie, div selector.&amp;#8217; I am often present around &lt;a href="https://www.youtube.com/watch?v=ZttT8n9DNKA"&gt;Utopia District&lt;/a&gt;-related events and live streams using that name. I have been known to shitpost things like this&amp;nbsp;and&lt;/p&gt;
&lt;iframe title="vimeo-player" src="https://player.vimeo.com/video/540154024?h=6803c6431f" width="640" height="528" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;I could literally go on with several other things that are also me from slightly/completely unrelated accounts and&amp;nbsp;pseudonyms.&lt;/p&gt;
&lt;p&gt;In fact, div has his own site that he never updates! I guarantee he would never mention me on one of his pages. He prefers a style &lt;a href="https://divsel.neocities.org/l33tkid"&gt;more like this&lt;/a&gt;. He wouldn&amp;#8217;t statically generate a stable, elegant page. He would make each one more obnoxious than the last by hand &amp;#8212; on&amp;nbsp;purpose.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m pretty sure the latest one, he hasn&amp;#8217;t even bothered to link from &lt;a href="https://divsel.neocities.org/"&gt;his home page&lt;/a&gt; anywhere yet. But I happen to know you could find it &lt;a href="https://divsel.neocities.org/legacy/test.html"&gt;here&lt;/a&gt;. It&amp;#8217;s not finished I guess is the reason&amp;nbsp;why&amp;#8230;&lt;/p&gt;
&lt;blockquote&gt;
&lt;h3&gt;&lt;a href="http://divsel.neocities.org"&gt;divsel.neocities.org&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;anyway&amp;#8230;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So yeah, I guess I am ultimately plugging my other page that I also not and probably will not update, because I will be making other pages elsewhere instead, And this is really just the tip of the&amp;nbsp;iceberg. &lt;/p&gt;
&lt;p&gt;I want to start being more honest with myself and hating myself less. I will try to remember to do that&amp;nbsp;here.&lt;/p&gt;</content><category term="Introspection"></category><category term="vaporwave"></category><category term="divselector"></category><category term="self"></category></entry><entry><title>Anything From the Client Side is User Input</title><link href="https://shaenr.github.io/2020/05/client-side-user-input/" rel="alternate"></link><published>2020-05-17T00:00:00-05:00</published><updated>2020-05-17T00:00:00-05:00</updated><author><name></name></author><id>tag:shaenr.github.io,2020-05-17:/2020/05/client-side-user-input/</id><summary type="html">&lt;p&gt;User input is dangerous. One of the first things you probably learn is that its necessary to not only validate what a user types into a form, but due to drastic variations in what a user can submit, you also have to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;User input is dangerous. One of the first things you probably learn is that its necessary to not only validate what a user types into a form, but due to drastic variations in what a user can submit, you also have to sanitize&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;If you make a calculator that runs &lt;code&gt;eval()&lt;/code&gt; on the raw string &lt;code&gt;'4 + 3 - 7'&lt;/code&gt; that was put to the program via an &lt;code&gt;input()&lt;/code&gt; prompt, you open a vector for a user to execute code in your program, and by extension, on the system that is running the&amp;nbsp;program.&lt;/p&gt;
&lt;p&gt;This is programming 101. When you make your first web form, you learn to validate and sanitize everything that the user sends&amp;nbsp;you.&lt;/p&gt;
&lt;h2&gt;Let&amp;#8217;s talk about&amp;nbsp;JavaScript&lt;/h2&gt;
&lt;p&gt;Imagine that we have created a little JavaScript &lt;span class="caps"&gt;UX&lt;/span&gt; for creating a character on our website for an online game. Maybe the game will be played in the browser or maybe it won&amp;#8217;t. It doesn&amp;#8217;t matter because either way, when the character creation experience is over, we have to send the data to the server so that we can save&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;When the user clicks submit, the character object is sent as a byte string in a &lt;span class="caps"&gt;POST&lt;/span&gt;&amp;nbsp;request.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;submitBtn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;click&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/character-submit&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;method&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;body&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;JSON&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;stringify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;character&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;then&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;response&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;then&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`POST response: &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="p"&gt;})&lt;/span&gt;
    &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is where it will be received, at our Flask app on a remote host running our website and our&amp;nbsp;database.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nd"&gt;@users&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/character-submit&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="nd"&gt;@login_required&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;character_submit&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Incoming..&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loads&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_data&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

    &lt;span class="n"&gt;commit_character_to_database&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;OK&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But what is missing here? What do we have to do before we commit this&amp;nbsp;data?&lt;/p&gt;
&lt;h2&gt;JavaScript that is sent to a server &lt;span class="caps"&gt;IS&lt;/span&gt; user&amp;nbsp;input.&lt;/h2&gt;
&lt;p&gt;In the average browser, a user can press &lt;code&gt;CTRL + SHIFT + I&lt;/code&gt; and open the console. They can look at the code and find the contextual value of &lt;code&gt;character&lt;/code&gt;, which we sent in the body of the fetch&amp;nbsp;request.&lt;/p&gt;
&lt;p&gt;This is what that character object might look like after its assembled in out character maker&amp;nbsp;interface.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;character&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;meat&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;leet&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;street&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;honesty&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;loadout&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;85.44 GB Wordlist&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
              &lt;span class="s2"&gt;&amp;quot;Samurai Sword&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But all a user has to do is write over this object, perhaps with their own properties, put directly in the console just before they click on our submit button. JavaScript occurs literally inside the user&amp;#8217;s browser. We have no control of what goes on there really. That&amp;#8217;s why they call it the&amp;nbsp;client-side. &lt;/p&gt;
&lt;p&gt;In the least horrible scenario, your user is starting the game with 99999 hp. In the worst, you have opened a vector for &lt;span class="caps"&gt;SQL&lt;/span&gt; Injection the moment that you save this to the&amp;nbsp;database.&lt;/p&gt;
&lt;p&gt;In any case, the certain outcome of treating &lt;span class="caps"&gt;JSON&lt;/span&gt; from a user&amp;#8217;s browser as something to take lightly is that things on the server will&amp;nbsp;break.&lt;/p&gt;
&lt;h2&gt;So how do we deal with&amp;nbsp;this?&lt;/h2&gt;
&lt;p&gt;Let&amp;#8217;s define the aforementioned function from our Flask&amp;nbsp;view:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;commit_character_to_database&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;OBJECT TOO LONG&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;403&lt;/span&gt;

    &lt;span class="n"&gt;meat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;leet&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;street&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;attrs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;meat&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;leet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;street&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;attr&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;attr&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;BAD ATTR VALUE&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;403&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;TypeError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ATTR SHOULD BE INT&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;403&lt;/span&gt;

    &lt;span class="n"&gt;honesty&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;honesty&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;honesty&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;honesty&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;HONESTY IS DISHONEST&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;403&lt;/span&gt;

    &lt;span class="n"&gt;loadout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;loadout&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loadout&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;BAD LOADOUT QUANTITY&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;403&lt;/span&gt;

    &lt;span class="n"&gt;loadout_items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Samurai Sword&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;85.44 GB Wordlist&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="s2"&gt;&amp;quot;Stolen Cyberdeck&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Fake Work Visa&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;loadout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;loadout_items&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;BAD LOADOUT ITEM&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;403&lt;/span&gt;

    &lt;span class="n"&gt;stats&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;meat&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;meat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;leet&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;leet&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;street&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;street&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                 &lt;span class="n"&gt;honesty&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;honesty&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;loadout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;loadout&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;new_character&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;CharacterSheet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;player_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;current_user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stats&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;stats&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new_character&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And that is still code that probably needs another round of sanitation and&amp;nbsp;review.&lt;/p&gt;</content><category term="misc"></category></entry></feed>